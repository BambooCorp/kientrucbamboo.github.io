<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
</head>
<body>

<h2>The XMLHttpRequest Object</h2>

<button type="button" onclick="loadDoc()">GET data</button><br/><br/>
<button type="button" onclick="postForm()">POST HTML form</button>
<button type="button" onclick="postJson(1, 111)">POST Json</button>
<button type="button" onclick="postJson(1, 222)">POST Json12</button>
<button type="button" onclick="postJson(2, 222)">POST Json22</button>
<button type="button" onclick="postJson(2, 333)">POST Json23</button>
<button type="button" onclick="postJsonJapan()">POST Json Japanese</button>
<button type="button" onclick="postJsons()">POST Jsons</button><br/><br/>
<button type="button" onclick="putJson()">PUT Json</button><br/><br/>
<button type="button" onclick="patchJson()">PATCH Json</button><br/><br/>

<pre id="json"></pre>

<script>

function loadDoc() {
	const xhttp = new XMLHttpRequest();
	xhttp.onload = function() {
		document.getElementById("json").innerHTML = JSON.stringify(JSON.parse(this.responseText), null, 2);
	}
	xhttp.open("GET", "http://34.85.116.72/rest/products/");
	//xhttp.open("GET", "http://127.0.0.1:8000/rest/products/", true);
	xhttp.send();
}

function postForm() {
	const xhttp = new XMLHttpRequest();
	xhttp.onload = function() {
		document.getElementById("json").innerHTML = JSON.stringify(JSON.parse(this.responseText), null, 2);
	}
	xhttp.open("POST", "http://34.85.116.72/rest/products/", true);
	//xhttp.open("POST", "http://127.0.0.1:8000/rest/products/", true);
	xhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
	xhttp.send('schedule_planning_cooperation_seq=1&production_number=123&製番=345');
	//xhttp.send('schedule_planning_cooperation_seq=1&production_number=123&planned_amount=1&hourly_price=1&base_days=1&processing_time_techs=1&setup_time_techs=1');
}

function postJson(id, no) {
	const xhttp = new XMLHttpRequest();
	xhttp.onload = function() {
		document.getElementById("json").innerHTML = JSON.stringify(JSON.parse(this.responseText), null, 2);
	}
	xhttp.open("POST", "http://34.85.116.72/rest/products/", true);
	//xhttp.open("POST", "http://127.0.0.1:8000/rest/products/", true);
	//xhttp.setRequestHeader("Access-Control-Allow-Origin", "*");
	xhttp.setRequestHeader("Content-Type", "application/json");
	xhttp.send(JSON.stringify({
		"schedule_planning_cooperation_seq": id,
		"production_number": no,
		// "planned_amount": 1,
		// "hourly_price": 1,
		// "base_days": 1,
		// "processing_time_techs": 1,
		// "setup_time_techs": 1
	}));
}

function postJsonJapan() {
	const xhttp = new XMLHttpRequest();
	xhttp.onload = function() {
		document.getElementById("json").innerHTML = JSON.stringify(JSON.parse(this.responseText), null, 2);
	}
	xhttp.open("POST", "http://34.85.116.72/rest/products/", true);
	//xhttp.open("POST", "http://127.0.0.1:8000/rest/products/", true);
	xhttp.setRequestHeader("Content-Type", "application/json");
	xhttp.send(JSON.stringify({
		"日程計画連携seq": 1331,
		"製番": "1606-231",
		"枝番": 0,
		"指示書": 1,
		"受注日": "2017-04-14T00:00:00",
		"客先注番": "",
		"客先製番": "",
		"希望納期": "2017-04-30T00:00:00",
		"回答納期": null,
		"出荷予定日": "2017-04-29T00:00:00",
		"製番目標納期": "2017-04-27T00:00:00",
		"受注担当者コード": "0040",
		"受注担当者正式名": "山本 浩二",
		"受注品番図番": "2003",
		"受注改訂": "",
		"受注品名": "スペーサブロック",
		"受注形式寸法": "80×30×15",
		"受注数量": 6,
		"出荷数": 0,
		"完了": "未完了",
		"見積": "M2806-0001",
		"部品材質": "S45C",
		"部品公差": "三価クロメート",
		"必要数量": 6,
		"単位": "個",
		"部品目標納期": "2017-04-27T00:00:00",
		"工程正式名Techs": "研削加工",
		"機械グループコードTechs": "",
		"機械コードTechs": "83",
		"機械正式名Techs": "精密成型平面研削盤",
		"担当者コードTechs": "0080",
		"担当者正式名Techs": "田中 宏和",
		"段取時間Techs": 0,
		"加工時間Techs": 60,
		"工程開始日Techs": "2017-04-27T00:00:00",
		"工程納期Techs": "2017-04-27T00:00:00",
		"開始日時日程計画": "2016/06/27 00:00",
		"完了日時日程計画": "2016/06/27 24:00",
		"基準日数": 1,
		"時間単価": 2800,
		"予定金額": 2800,
		"進捗区分Techs": "未着手",
		"登録日時日程計画": "2017-04-15T16:55:37.593",
		"更新日時日程計画": "2017-04-15T18:50:40"
	}));
}

function postJsons() {
	const xhttp = new XMLHttpRequest();
	xhttp.onload = function() {
		document.getElementById("json").innerHTML = JSON.stringify(JSON.parse(this.responseText), null, 2);
	}
	xhttp.open("POST", "http://34.85.116.72/rest/products/", true);
	//xhttp.open("POST", "http://127.0.0.1:8000/rest/products/", true);
	xhttp.setRequestHeader("Content-Type", "application/json");
	xhttp.send(JSON.stringify([{
		"schedule_planning_cooperation_seq": 1,
		"production_number": 123,
		"planned_amount": 1,
		"hourly_price": 1,
		"base_days": 1,
		"processing_time_techs": 1,
		"setup_time_techs": 1
	},{
		"schedule_planning_cooperation_seq": 2,
		"production_number": 234,
		"planned_amount": 1,
		"hourly_price": 1,
		"base_days": 1,
		"processing_time_techs": 1,
		"setup_time_techs": 1
	}]));
}

function putJson() {
	const xhttp = new XMLHttpRequest();
	xhttp.onload = function() {
		document.getElementById("json").innerHTML = JSON.stringify(JSON.parse(this.responseText), null, 2);
	}
	xhttp.open("PUT", "http://34.85.116.72/rest/products/1/", true);
	//xhttp.open("POST", "http://127.0.0.1:8000/rest/products/", true);
	xhttp.setRequestHeader("Content-Type", "application/json");
	xhttp.send(JSON.stringify({
		"production_number": 222,
		//"planned_amount": 1,
		//"hourly_price": 1,
		//"base_days": 1,
		//"processing_time_techs": 1,
		//"setup_time_techs": 1
	}));
}

function patchJson() {
	const xhttp = new XMLHttpRequest();
	xhttp.onload = function() {
		document.getElementById("json").innerHTML = JSON.stringify(JSON.parse(this.responseText), null, 2);
	}
	xhttp.open("PATCH", "http://34.85.116.72/rest/products/1/", true);
	//xhttp.open("POST", "http://127.0.0.1:8000/rest/products/", true);
	xhttp.setRequestHeader("Content-Type", "application/json");
	xhttp.send(JSON.stringify({
		"production_number": 333,
		"planned_amount": 1,
		"hourly_price": 1,
		"base_days": 1,
		"processing_time_techs": 1,
		"setup_time_techs": 1
	}));
}
</script>

</body>
</html>